{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vcp_2\\\\Desktop\\\\Bentao\\\\TCC\\\\AGV-MAC2\\\\agv-mobile\\\\src\\\\screens\\\\QRScannerScreen.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Camera, CameraView } from 'expo-camera';\nimport { Button, Card, Title, Paragraph, ActivityIndicator } from 'react-native-paper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QRScannerScreen = ({\n  navigation,\n  route\n}) => {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [scanned, setScanned] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [serverUrl, setServerUrl] = useState('http://192.168.0.134:5000');\n  useEffect(() => {\n    (async () => {\n      const {\n        status\n      } = await Camera.requestCameraPermissionsAsync();\n      setHasPermission(status === 'granted');\n      await testarConectividade();\n    })();\n  }, []);\n  const testarConectividade = async () => {\n    try {\n      console.log('üåê Testando conectividade com servidor...');\n      Alert.alert('Testando Conectividade', 'Verificando conex√£o com o servidor...');\n      const response = await fetch(`${serverUrl}/status`);\n      if (response.ok) {\n        console.log('‚úÖ Servidor acess√≠vel via:', serverUrl);\n        Alert.alert('‚úÖ Sucesso', `Servidor acess√≠vel via ${serverUrl}`);\n      } else {\n        console.log('‚ö†Ô∏è Servidor respondeu mas com erro:', response.status);\n        Alert.alert('‚ö†Ô∏è Aviso', `Servidor respondeu com erro: ${response.status}`);\n      }\n    } catch (error) {\n      console.log('‚ùå Erro de conectividade:', error);\n      Alert.alert('‚ùå Erro de Rede', `N√£o foi poss√≠vel conectar ao servidor: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);\n      console.log('üí° Tentando localhost...');\n      try {\n        const response = await fetch('http://10.0.2.2:5000/status');\n        if (response.ok) {\n          console.log('‚úÖ Servidor acess√≠vel via localhost (Android emulator)');\n          setServerUrl('http://10.0.2.2:5000');\n          Alert.alert('‚úÖ Alternativa Encontrada', 'Servidor acess√≠vel via localhost (emulador)');\n        }\n      } catch (error2) {\n        console.log('‚ùå Localhost tamb√©m falhou');\n        Alert.alert('‚ùå Problema de Rede', 'Verifique se o servidor est√° rodando e se h√° conectividade WiFi');\n      }\n    }\n  };\n  const handleBarCodeScanned = async ({\n    type,\n    data\n  }) => {\n    console.log('üéØ handleBarCodeScanned CHAMADA!');\n    console.log('üìä Tipo:', type);\n    console.log('üìù Dados:', data);\n    setScanned(true);\n    setLoading(true);\n    try {\n      console.log('üöÄ Iniciando processamento do QR Code:', data);\n      Alert.alert('üì± QR Code Detectado', `C√≥digo lido: ${data}\\nIniciando busca...`);\n      console.log('üîç Verificando formato do QR code...');\n      console.log('üìã Data recebida:', data);\n      console.log('üìã startsWith AGV-:', data.startsWith('AGV-'));\n      console.log('üìã includes Corredor_:', data.includes('Corredor_'));\n      console.log('üìã regex ^\\\\d{4,}$:', /^\\d{4,}$/.test(data));\n      console.log('üìã startsWith TAG:', data.startsWith('TAG'));\n      if (data.startsWith('AGV-') || data.includes('Corredor_') || /^\\d{4,}$/.test(data) || data.startsWith('TAG')) {\n        console.log('‚úÖ QR code v√°lido detectado, iniciando busca...');\n        const itemInfo = await buscarItemPorQR(data);\n        if (itemInfo) {\n          Alert.alert('Item Encontrado!', `Nome: ${itemInfo.nome}\\nTag: ${itemInfo.tag}\\nCategoria: ${itemInfo.categoria}`, [{\n            text: 'Adicionar ao Pedido',\n            onPress: () => {\n              navigation.navigate('Orders', {\n                itemParaAdicionar: itemInfo\n              });\n            }\n          }, {\n            text: 'Ver Detalhes',\n            onPress: () => {\n              Alert.alert('Detalhes do Item', `Nome: ${itemInfo.nome}\\nTag: ${itemInfo.tag}\\nCategoria: ${itemInfo.categoria}\\nLocaliza√ß√£o: Corredor ${itemInfo.corredor}, Sub ${itemInfo.sub_corredor}, Pos ${itemInfo.posicao_x}`, [{\n                text: 'OK'\n              }]);\n            }\n          }, {\n            text: 'Escanear Outro',\n            onPress: () => setScanned(false)\n          }]);\n        } else {\n          Alert.alert('Item N√£o Encontrado', 'Este QR code n√£o corresponde a nenhum item cadastrado no sistema.', [{\n            text: 'Tentar Novamente',\n            onPress: () => setScanned(false)\n          }, {\n            text: 'Voltar',\n            onPress: () => navigation.goBack()\n          }]);\n        }\n      } else {\n        Alert.alert('QR Code Inv√°lido', 'Este QR code n√£o √© v√°lido para o sistema AGV.', [{\n          text: 'Tentar Novamente',\n          onPress: () => setScanned(false)\n        }, {\n          text: 'Voltar',\n          onPress: () => navigation.goBack()\n        }]);\n      }\n    } catch (error) {\n      console.error('Erro ao processar QR code:', error);\n      Alert.alert('Erro', 'Erro ao processar o QR code. Tente novamente.', [{\n        text: 'OK',\n        onPress: () => setScanned(false)\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const buscarItemPorQR = async qrData => {\n    try {\n      console.log('üîç Iniciando busca para QR:', qrData);\n      Alert.alert('üîç Buscando Item', `Procurando item para: ${qrData}`);\n      let response;\n      let urlTentada = '';\n      if (qrData.startsWith('TAG') && /^\\d{4,}$/.test(qrData.substring(3))) {\n        console.log('üìã Detectado formato TAGXXXX');\n        urlTentada = `${serverUrl}/itens/tag/${qrData}`;\n        console.log('üîó Tentando URL:', urlTentada);\n        response = await fetch(urlTentada);\n        if (response.ok) {\n          console.log('‚úÖ Sucesso na primeira tentativa');\n          Alert.alert('‚úÖ Item Encontrado!', 'Busca realizada com sucesso.');\n          const data = await response.json();\n          return data;\n        } else {\n          console.log('‚ùå Primeira tentativa falhou, tentando sem prefixo TAG');\n          Alert.alert('üîÑ Tentando Alternativa', 'Primeira busca falhou, tentando formato alternativo...');\n          const tagNumerica = qrData.substring(3);\n          urlTentada = `${serverUrl}/itens/tag/${tagNumerica}`;\n          console.log('üîó Tentando URL alternativa:', urlTentada);\n          response = await fetch(urlTentada);\n          if (response.ok) {\n            console.log('‚úÖ Sucesso na segunda tentativa');\n            const data = await response.json();\n            return data;\n          }\n        }\n      } else if (/^\\d{4,}$/.test(qrData)) {\n        console.log('üìã Detectado formato num√©rico');\n        urlTentada = `${serverUrl}/itens/tag/${qrData}`;\n        console.log('üîó Tentando URL:', urlTentada);\n        response = await fetch(urlTentada);\n        if (response.ok) {\n          console.log('‚úÖ Sucesso na busca num√©rica');\n          const data = await response.json();\n          return data;\n        }\n      } else if (qrData.includes('Corredor_') && qrData.includes('SubCorredor_')) {\n        console.log('üìã Detectado formato localiza√ß√£o');\n        const partes = qrData.split('/');\n        if (partes.length >= 2) {\n          const corredor = partes[0].split('_')[1];\n          const subCorredor = partes[1].split('_')[1];\n          urlTentada = `${serverUrl}/itens/localizacao/${corredor}/${subCorredor}`;\n          console.log('üîó Tentando URL localiza√ß√£o:', urlTentada);\n          response = await fetch(urlTentada);\n        }\n      } else {\n        console.log('üìã Usando busca geral');\n        urlTentada = `${serverUrl}/itens/buscar?q=${encodeURIComponent(qrData)}`;\n        console.log('üîó Tentando URL geral:', urlTentada);\n        response = await fetch(urlTentada);\n      }\n      if (response && response.ok) {\n        console.log('‚úÖ Resposta OK recebida');\n        const data = await response.json();\n        console.log('üì¶ Dados recebidos:', data);\n        if (Array.isArray(data)) {\n          return data.length > 0 ? data[0] : null;\n        }\n        return data;\n      } else {\n        console.log('‚ùå Resposta n√£o OK:', response ? response.status : 'Sem resposta');\n      }\n      console.log('üîç Busca conclu√≠da sem sucesso');\n      return null;\n    } catch (error) {\n      console.error('üí• Erro ao buscar item:', error);\n      return null;\n    }\n  };\n  if (hasPermission === null) {\n    return _jsxDEV(View, {\n      style: styles.container,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.loadingText,\n        children: \"Solicitando permiss\\xE3o da c\\xE2mera...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this);\n  }\n  if (hasPermission === false) {\n    return _jsxDEV(View, {\n      style: styles.container,\n      children: _jsxDEV(Card, {\n        style: styles.card,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Title, {\n            style: styles.title,\n            children: \"Permiss\\xE3o Negada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), _jsxDEV(Paragraph, {\n            style: styles.paragraph,\n            children: \"Para usar o scanner de QR code, voc\\xEA precisa permitir o acesso \\xE0 c\\xE2mera.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), _jsxDEV(Button, {\n            mode: \"contained\",\n            onPress: () => navigation.goBack(),\n            style: styles.button,\n            children: \"Voltar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(CameraView, {\n      style: StyleSheet.absoluteFillObject,\n      facing: \"back\",\n      onBarcodeScanned: scanned ? undefined : handleBarCodeScanned\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.overlay,\n      children: [_jsxDEV(View, {\n        style: styles.scanArea,\n        children: [_jsxDEV(View, {\n          style: styles.cornerTopLeft\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: styles.cornerTopRight\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: styles.cornerBottomLeft\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: styles.cornerBottomRight\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), _jsxDEV(Card, {\n        style: styles.instructionsCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Title, {\n            style: styles.instructionsTitle,\n            children: \"Scanner de QR Code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), _jsxDEV(Paragraph, {\n            style: styles.instructionsText,\n            children: \"Posicione o QR code dentro da \\xE1rea marcada para escanear automaticamente.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), scanned && _jsxDEV(Card, {\n        style: styles.resultCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Title, {\n            style: styles.resultTitle,\n            children: \"Processando...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this), loading && _jsxDEV(ActivityIndicator, {\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 11\n      }, this), _jsxDEV(View, {\n        style: styles.buttonContainer,\n        children: [_jsxDEV(Button, {\n          mode: \"contained\",\n          onPress: () => setScanned(false),\n          style: styles.scanButton,\n          disabled: loading,\n          children: scanned ? 'Escanear Novamente' : 'Pausar Scanner'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), _jsxDEV(Button, {\n          mode: \"outlined\",\n          onPress: testarConectividade,\n          style: styles.testButton,\n          children: \"\\uD83E\\uDDEA Testar Conex\\xE3o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), _jsxDEV(Button, {\n          mode: \"outlined\",\n          onPress: () => navigation.goBack(),\n          style: styles.backButton,\n          children: \"Voltar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 5\n  }, this);\n};\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000'\n  },\n  loadingText: {\n    color: '#fff',\n    fontSize: 16,\n    marginTop: 20\n  },\n  card: {\n    margin: 20,\n    elevation: 4\n  },\n  title: {\n    textAlign: 'center',\n    color: '#1e293b'\n  },\n  paragraph: {\n    textAlign: 'center',\n    marginVertical: 10\n  },\n  button: {\n    marginTop: 20\n  },\n  overlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  scanArea: {\n    width: 250,\n    height: 250,\n    borderWidth: 2,\n    borderColor: '#00ff00',\n    backgroundColor: 'transparent',\n    position: 'relative'\n  },\n  cornerTopLeft: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: 20,\n    height: 20,\n    borderTopWidth: 4,\n    borderLeftWidth: 4,\n    borderColor: '#00ff00',\n    borderTopLeftRadius: 10\n  },\n  cornerTopRight: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    width: 20,\n    height: 20,\n    borderTopWidth: 4,\n    borderRightWidth: 4,\n    borderColor: '#00ff00',\n    borderTopRightRadius: 10\n  },\n  cornerBottomLeft: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    width: 20,\n    height: 20,\n    borderBottomWidth: 4,\n    borderLeftWidth: 4,\n    borderColor: '#00ff00',\n    borderBottomLeftRadius: 10\n  },\n  cornerBottomRight: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 20,\n    height: 20,\n    borderBottomWidth: 4,\n    borderRightWidth: 4,\n    borderColor: '#00ff00',\n    borderBottomRightRadius: 10\n  },\n  instructionsCard: {\n    marginTop: 30,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    marginHorizontal: 20\n  },\n  instructionsTitle: {\n    color: '#fff',\n    textAlign: 'center'\n  },\n  instructionsText: {\n    color: '#fff',\n    textAlign: 'center',\n    opacity: 0.9\n  },\n  resultCard: {\n    marginTop: 20,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)'\n  },\n  resultTitle: {\n    color: '#fff',\n    textAlign: 'center'\n  },\n  buttonContainer: {\n    position: 'absolute',\n    bottom: 50,\n    left: 20,\n    right: 20,\n    gap: 10\n  },\n  scanButton: {\n    backgroundColor: '#00ff00'\n  },\n  backButton: {\n    borderColor: '#fff'\n  },\n  testButton: {\n    borderColor: '#ffa500'\n  }\n});\nexport default QRScannerScreen;","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","Alert","Text","Camera","CameraView","Button","Card","Title","Paragraph","ActivityIndicator","jsxDEV","_jsxDEV","QRScannerScreen","navigation","route","hasPermission","setHasPermission","scanned","setScanned","loading","setLoading","serverUrl","setServerUrl","status","requestCameraPermissionsAsync","testarConectividade","console","log","alert","response","fetch","ok","error","Error","message","error2","handleBarCodeScanned","type","data","startsWith","includes","test","itemInfo","buscarItemPorQR","nome","tag","categoria","text","onPress","navigate","itemParaAdicionar","corredor","sub_corredor","posicao_x","goBack","qrData","urlTentada","substring","json","tagNumerica","partes","split","length","subCorredor","encodeURIComponent","Array","isArray","style","styles","container","children","size","fileName","_jsxFileName","lineNumber","columnNumber","loadingText","card","Content","title","paragraph","mode","button","absoluteFillObject","facing","onBarcodeScanned","undefined","overlay","scanArea","cornerTopLeft","cornerTopRight","cornerBottomLeft","cornerBottomRight","instructionsCard","instructionsTitle","instructionsText","resultCard","resultTitle","buttonContainer","scanButton","disabled","testButton","backButton","create","flex","backgroundColor","color","fontSize","marginTop","margin","elevation","textAlign","marginVertical","justifyContent","alignItems","width","height","borderWidth","borderColor","position","top","left","borderTopWidth","borderLeftWidth","borderTopLeftRadius","right","borderRightWidth","borderTopRightRadius","bottom","borderBottomWidth","borderBottomLeftRadius","borderBottomRightRadius","marginHorizontal","opacity","gap"],"sources":["C:/Users/vcp_2/Desktop/Bentao/TCC/AGV-MAC2/agv-mobile/src/screens/QRScannerScreen.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { View, StyleSheet, Alert, Text } from 'react-native';\r\nimport { Camera, CameraView } from 'expo-camera';\r\nimport { Button, Card, Title, Paragraph, ActivityIndicator } from 'react-native-paper';\r\n\r\ninterface QRScannerScreenProps {\r\n  navigation: any;\r\n  route: any;\r\n}\r\n\r\nconst QRScannerScreen: React.FC<QRScannerScreenProps> = ({ navigation, route }) => {\r\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\r\n  const [scanned, setScanned] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [serverUrl, setServerUrl] = useState('http://192.168.0.134:5000');\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await Camera.requestCameraPermissionsAsync();\r\n      setHasPermission(status === 'granted');\r\n\r\n      // Testar conectividade com o servidor\r\n      await testarConectividade();\r\n    })();\r\n  }, []);\r\n\r\n  const testarConectividade = async () => {\r\n    try {\r\n      console.log('üåê Testando conectividade com servidor...');\r\n      Alert.alert('Testando Conectividade', 'Verificando conex√£o com o servidor...');\r\n\r\n      const response = await fetch(`${serverUrl}/status`);\r\n      if (response.ok) {\r\n        console.log('‚úÖ Servidor acess√≠vel via:', serverUrl);\r\n        Alert.alert('‚úÖ Sucesso', `Servidor acess√≠vel via ${serverUrl}`);\r\n      } else {\r\n        console.log('‚ö†Ô∏è Servidor respondeu mas com erro:', response.status);\r\n        Alert.alert('‚ö†Ô∏è Aviso', `Servidor respondeu com erro: ${response.status}`);\r\n      }\r\n    } catch (error) {\r\n      console.log('‚ùå Erro de conectividade:', error);\r\n      Alert.alert('‚ùå Erro de Rede', `N√£o foi poss√≠vel conectar ao servidor: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);\r\n\r\n      console.log('üí° Tentando localhost...');\r\n\r\n      // Tentar localhost como alternativa\r\n      try {\r\n        const response = await fetch('http://10.0.2.2:5000/status'); // Para Android emulator\r\n        if (response.ok) {\r\n          console.log('‚úÖ Servidor acess√≠vel via localhost (Android emulator)');\r\n          setServerUrl('http://10.0.2.2:5000');\r\n          Alert.alert('‚úÖ Alternativa Encontrada', 'Servidor acess√≠vel via localhost (emulador)');\r\n        }\r\n      } catch (error2) {\r\n        console.log('‚ùå Localhost tamb√©m falhou');\r\n        Alert.alert('‚ùå Problema de Rede', 'Verifique se o servidor est√° rodando e se h√° conectividade WiFi');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleBarCodeScanned = async ({ type, data }: { type: string; data: string }) => {\r\n    console.log('üéØ handleBarCodeScanned CHAMADA!');\r\n    console.log('üìä Tipo:', type);\r\n    console.log('üìù Dados:', data);\r\n\r\n    setScanned(true);\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Processar o QR code lido\r\n      console.log('üöÄ Iniciando processamento do QR Code:', data);\r\n      Alert.alert('üì± QR Code Detectado', `C√≥digo lido: ${data}\\nIniciando busca...`);\r\n\r\n      // Verificar se √© um QR code v√°lido do sistema AGV\r\n      console.log('üîç Verificando formato do QR code...');\r\n      console.log('üìã Data recebida:', data);\r\n      console.log('üìã startsWith AGV-:', data.startsWith('AGV-'));\r\n      console.log('üìã includes Corredor_:', data.includes('Corredor_'));\r\n      console.log('üìã regex ^\\\\d{4,}$:', /^\\d{4,}$/.test(data));\r\n      console.log('üìã startsWith TAG:', data.startsWith('TAG'));\r\n\r\n      if (data.startsWith('AGV-') || data.includes('Corredor_') || /^\\d{4,}$/.test(data) || data.startsWith('TAG')) {\r\n        console.log('‚úÖ QR code v√°lido detectado, iniciando busca...');\r\n        // QR code v√°lido - buscar informa√ß√µes do item\r\n        const itemInfo = await buscarItemPorQR(data);\r\n\r\n        if (itemInfo) {\r\n          Alert.alert(\r\n            'Item Encontrado!',\r\n            `Nome: ${itemInfo.nome}\\nTag: ${itemInfo.tag}\\nCategoria: ${itemInfo.categoria}`,\r\n            [\r\n              {\r\n                text: 'Adicionar ao Pedido',\r\n                onPress: () => {\r\n                  // Passar o item para a tela de pedidos\r\n                  navigation.navigate('Orders', { itemParaAdicionar: itemInfo });\r\n                }\r\n              },\r\n              {\r\n                text: 'Ver Detalhes',\r\n                onPress: () => {\r\n                  // Mostrar detalhes do item\r\n                  Alert.alert(\r\n                    'Detalhes do Item',\r\n                    `Nome: ${itemInfo.nome}\\nTag: ${itemInfo.tag}\\nCategoria: ${itemInfo.categoria}\\nLocaliza√ß√£o: Corredor ${itemInfo.corredor}, Sub ${itemInfo.sub_corredor}, Pos ${itemInfo.posicao_x}`,\r\n                    [{ text: 'OK' }]\r\n                  );\r\n                }\r\n              },\r\n              {\r\n                text: 'Escanear Outro',\r\n                onPress: () => setScanned(false)\r\n              }\r\n            ]\r\n          );\r\n        } else {\r\n          Alert.alert(\r\n            'Item N√£o Encontrado',\r\n            'Este QR code n√£o corresponde a nenhum item cadastrado no sistema.',\r\n            [\r\n              { text: 'Tentar Novamente', onPress: () => setScanned(false) },\r\n              { text: 'Voltar', onPress: () => navigation.goBack() }\r\n            ]\r\n          );\r\n        }\r\n      } else {\r\n        Alert.alert(\r\n          'QR Code Inv√°lido',\r\n          'Este QR code n√£o √© v√°lido para o sistema AGV.',\r\n          [\r\n            { text: 'Tentar Novamente', onPress: () => setScanned(false) },\r\n            { text: 'Voltar', onPress: () => navigation.goBack() }\r\n          ]\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao processar QR code:', error);\r\n      Alert.alert(\r\n        'Erro',\r\n        'Erro ao processar o QR code. Tente novamente.',\r\n        [{ text: 'OK', onPress: () => setScanned(false) }]\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const buscarItemPorQR = async (qrData: string) => {\r\n    try {\r\n      console.log('üîç Iniciando busca para QR:', qrData);\r\n      Alert.alert('üîç Buscando Item', `Procurando item para: ${qrData}`);\r\n\r\n      // Tentar diferentes formatos de QR code\r\n      let response;\r\n      let urlTentada = '';\r\n\r\n      // Se for formato TAGXXXX (como TAG0001)\r\n      if (qrData.startsWith('TAG') && /^\\d{4,}$/.test(qrData.substring(3))) {\r\n        console.log('üìã Detectado formato TAGXXXX');\r\n\r\n        // Primeiro tenta buscar com o formato completo TAGXXXX\r\n        urlTentada = `${serverUrl}/itens/tag/${qrData}`;\r\n        console.log('üîó Tentando URL:', urlTentada);\r\n        response = await fetch(urlTentada);\r\n\r\n        if (response.ok) {\r\n          console.log('‚úÖ Sucesso na primeira tentativa');\r\n          Alert.alert('‚úÖ Item Encontrado!', 'Busca realizada com sucesso.');\r\n          const data = await response.json();\r\n          return data;\r\n        } else {\r\n          console.log('‚ùå Primeira tentativa falhou, tentando sem prefixo TAG');\r\n          Alert.alert('üîÑ Tentando Alternativa', 'Primeira busca falhou, tentando formato alternativo...');\r\n\r\n          // Se n√£o encontrou, tenta buscar apenas com os n√∫meros\r\n          const tagNumerica = qrData.substring(3);\r\n          urlTentada = `${serverUrl}/itens/tag/${tagNumerica}`;\r\n          console.log('üîó Tentando URL alternativa:', urlTentada);\r\n          response = await fetch(urlTentada);\r\n\r\n          if (response.ok) {\r\n            console.log('‚úÖ Sucesso na segunda tentativa');\r\n            const data = await response.json();\r\n            return data;\r\n          }\r\n        }\r\n      }\r\n      // Se for uma tag num√©rica (4+ d√≠gitos) - pode ser apenas n√∫meros\r\n      else if (/^\\d{4,}$/.test(qrData)) {\r\n        console.log('üìã Detectado formato num√©rico');\r\n\r\n        // Primeiro tenta buscar com o formato exato\r\n        urlTentada = `${serverUrl}/itens/tag/${qrData}`;\r\n        console.log('üîó Tentando URL:', urlTentada);\r\n        response = await fetch(urlTentada);\r\n\r\n        if (response.ok) {\r\n          console.log('‚úÖ Sucesso na busca num√©rica');\r\n          const data = await response.json();\r\n          return data;\r\n        }\r\n      }\r\n      // Se for formato Corredor_SubCorredor\r\n      else if (qrData.includes('Corredor_') && qrData.includes('SubCorredor_')) {\r\n        console.log('üìã Detectado formato localiza√ß√£o');\r\n\r\n        const partes = qrData.split('/');\r\n        if (partes.length >= 2) {\r\n          const corredor = partes[0].split('_')[1];\r\n          const subCorredor = partes[1].split('_')[1];\r\n          urlTentada = `${serverUrl}/itens/localizacao/${corredor}/${subCorredor}`;\r\n          console.log('üîó Tentando URL localiza√ß√£o:', urlTentada);\r\n          response = await fetch(urlTentada);\r\n        }\r\n      }\r\n      // Busca geral por nome/tag\r\n      else {\r\n        console.log('üìã Usando busca geral');\r\n\r\n        urlTentada = `${serverUrl}/itens/buscar?q=${encodeURIComponent(qrData)}`;\r\n        console.log('üîó Tentando URL geral:', urlTentada);\r\n        response = await fetch(urlTentada);\r\n      }\r\n\r\n      if (response && response.ok) {\r\n        console.log('‚úÖ Resposta OK recebida');\r\n        const data = await response.json();\r\n        console.log('üì¶ Dados recebidos:', data);\r\n\r\n        // Para busca geral, retorna o primeiro item se existir\r\n        if (Array.isArray(data)) {\r\n          return data.length > 0 ? data[0] : null;\r\n        }\r\n        // Para busca espec√≠fica, retorna o item diretamente\r\n        return data;\r\n      } else {\r\n        console.log('‚ùå Resposta n√£o OK:', response ? response.status : 'Sem resposta');\r\n      }\r\n\r\n      console.log('üîç Busca conclu√≠da sem sucesso');\r\n      return null;\r\n    } catch (error) {\r\n      console.error('üí• Erro ao buscar item:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  if (hasPermission === null) {\r\n    return (\r\n      <View style={styles.container}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Text style={styles.loadingText}>Solicitando permiss√£o da c√¢mera...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (hasPermission === false) {\r\n    return (\r\n      <View style={styles.container}>\r\n        <Card style={styles.card}>\r\n          <Card.Content>\r\n            <Title style={styles.title}>Permiss√£o Negada</Title>\r\n            <Paragraph style={styles.paragraph}>\r\n              Para usar o scanner de QR code, voc√™ precisa permitir o acesso √† c√¢mera.\r\n            </Paragraph>\r\n            <Button\r\n              mode=\"contained\"\r\n              onPress={() => navigation.goBack()}\r\n              style={styles.button}\r\n            >\r\n              Voltar\r\n            </Button>\r\n          </Card.Content>\r\n        </Card>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <CameraView\r\n        style={StyleSheet.absoluteFillObject}\r\n        facing=\"back\"\r\n        onBarcodeScanned={scanned ? undefined : handleBarCodeScanned}\r\n      />\r\n\r\n      {/* Overlay com instru√ß√µes */}\r\n      <View style={styles.overlay}>\r\n        <View style={styles.scanArea}>\r\n          <View style={styles.cornerTopLeft} />\r\n          <View style={styles.cornerTopRight} />\r\n          <View style={styles.cornerBottomLeft} />\r\n          <View style={styles.cornerBottomRight} />\r\n        </View>\r\n\r\n        <Card style={styles.instructionsCard}>\r\n          <Card.Content>\r\n            <Title style={styles.instructionsTitle}>Scanner de QR Code</Title>\r\n            <Paragraph style={styles.instructionsText}>\r\n              Posicione o QR code dentro da √°rea marcada para escanear automaticamente.\r\n            </Paragraph>\r\n          </Card.Content>\r\n        </Card>\r\n\r\n        {scanned && (\r\n          <Card style={styles.resultCard}>\r\n            <Card.Content>\r\n              <Title style={styles.resultTitle}>Processando...</Title>\r\n              {loading && <ActivityIndicator size=\"small\" />}\r\n            </Card.Content>\r\n          </Card>\r\n        )}\r\n\r\n        <View style={styles.buttonContainer}>\r\n          <Button\r\n            mode=\"contained\"\r\n            onPress={() => setScanned(false)}\r\n            style={styles.scanButton}\r\n            disabled={loading}\r\n          >\r\n            {scanned ? 'Escanear Novamente' : 'Pausar Scanner'}\r\n          </Button>\r\n\r\n          <Button\r\n            mode=\"outlined\"\r\n            onPress={testarConectividade}\r\n            style={styles.testButton}\r\n          >\r\n            üß™ Testar Conex√£o\r\n          </Button>\r\n\r\n          <Button\r\n            mode=\"outlined\"\r\n            onPress={() => navigation.goBack()}\r\n            style={styles.backButton}\r\n          >\r\n            Voltar\r\n          </Button>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#000',\r\n  },\r\n  loadingText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    marginTop: 20,\r\n  },\r\n  card: {\r\n    margin: 20,\r\n    elevation: 4,\r\n  },\r\n  title: {\r\n    textAlign: 'center',\r\n    color: '#1e293b',\r\n  },\r\n  paragraph: {\r\n    textAlign: 'center',\r\n    marginVertical: 10,\r\n  },\r\n  button: {\r\n    marginTop: 20,\r\n  },\r\n  overlay: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  scanArea: {\r\n    width: 250,\r\n    height: 250,\r\n    borderWidth: 2,\r\n    borderColor: '#00ff00',\r\n    backgroundColor: 'transparent',\r\n    position: 'relative',\r\n  },\r\n  cornerTopLeft: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    width: 20,\r\n    height: 20,\r\n    borderTopWidth: 4,\r\n    borderLeftWidth: 4,\r\n    borderColor: '#00ff00',\r\n    borderTopLeftRadius: 10,\r\n  },\r\n  cornerTopRight: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    right: 0,\r\n    width: 20,\r\n    height: 20,\r\n    borderTopWidth: 4,\r\n    borderRightWidth: 4,\r\n    borderColor: '#00ff00',\r\n    borderTopRightRadius: 10,\r\n  },\r\n  cornerBottomLeft: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    width: 20,\r\n    height: 20,\r\n    borderBottomWidth: 4,\r\n    borderLeftWidth: 4,\r\n    borderColor: '#00ff00',\r\n    borderBottomLeftRadius: 10,\r\n  },\r\n  cornerBottomRight: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    right: 0,\r\n    width: 20,\r\n    height: 20,\r\n    borderBottomWidth: 4,\r\n    borderRightWidth: 4,\r\n    borderColor: '#00ff00',\r\n    borderBottomRightRadius: 10,\r\n  },\r\n  instructionsCard: {\r\n    marginTop: 30,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n    marginHorizontal: 20,\r\n  },\r\n  instructionsTitle: {\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n  },\r\n  instructionsText: {\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    opacity: 0.9,\r\n  },\r\n  resultCard: {\r\n    marginTop: 20,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n  },\r\n  resultTitle: {\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n  },\r\n  buttonContainer: {\r\n    position: 'absolute',\r\n    bottom: 50,\r\n    left: 20,\r\n    right: 20,\r\n    gap: 10,\r\n  },\r\n  scanButton: {\r\n    backgroundColor: '#00ff00',\r\n  },\r\n  backButton: {\r\n    borderColor: '#fff',\r\n  },\r\n  testButton: {\r\n    borderColor: '#ffa500',\r\n  },\r\n});\r\n\r\nexport default QRScannerScreen;"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}