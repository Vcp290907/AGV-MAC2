flowchart TD
    A[Usuario acessa a pagina de login] --> B[Frontend: Login.jsx carrega]
    B --> C[Usuario preenche credenciais]
    C --> D{Campos obrigatorios preenchidos?}
    
    D -->|Nao| E[Frontend: Exibe erro de validacao]
    E --> C
    
    D -->|Sim| F[Frontend: Envia POST para /login]
    F --> G[Loading = true]
    G --> H[HTTP Request para Backend]
    
    H --> I[Backend: auth.py recebe requisicao]
    I --> J[Backend: Extrai username e password]
    J --> K{Campos vazios?}
    
    K -->|Sim| L[Retorna erro 400: Campos obrigatorios]
    K -->|Nao| M[Chama verificar_usuario]
    
    M --> N[database.py: Conecta ao SQLite]
    N --> O[Criptografa senha com SHA256]
    O --> P[Busca usuario no banco]
    P --> Q{Usuario encontrado e ativo?}
    
    Q -->|Nao| R[Retorna erro 401: Credenciais invalidas]
    Q -->|Sim| S[Retorna sucesso + dados do usuario]
    
    L --> T[Frontend: Recebe resposta]
    R --> T
    S --> T
    
    T --> U{Response.success?}
    
    U -->|Nao| V[Frontend: Exibe mensagem de erro]
    V --> W[Loading = false]
    W --> C
    
    U -->|Sim| X[Frontend: Salva dados no localStorage]
    X --> Y[Loading = false]
    Y --> Z[Frontend: Chama onLogin]
    Z --> AA[Redireciona para Dashboard]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style I fill:#fff3e0
    style N fill:#e8f5e8
    style AA fill:#e8f5e8
    style V fill:#ffebee
    style L fill:#ffebee
    style R fill:#ffebee